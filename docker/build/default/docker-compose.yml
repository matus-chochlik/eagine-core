version: "3"
services:
    eagine-build-default:
        image: ${EAGINE_DOCKER_REGISTRY_HOST}:${EAGINE_DOCKER_REGISTRY_PORT}/eagine:build-default
        network_mode: host
        stdin_open: true
        tty: true
        volumes:
          - eagine-build-default-source:/home/eagine/source
          - eagine-build-default-binary:/home/eagine/binary
          - eagine-build-default-install:/home/eagine/install
        deploy:
            placement:
                constraints:
                    - node.platform.os == linux
                    - node.platform.architecture == aarch64

volumes:
  eagine-build-default-source:
    driver: local
  eagine-build-default-binary:
    driver: local
  eagine-build-default-install:
    driver: local
